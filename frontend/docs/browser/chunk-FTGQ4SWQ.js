import{h as m,i as g,j as v}from"./chunk-5WQAUWMP.js";import{$ as s,Qb as y,Rb as M,T as d,W as n,o}from"./chunk-JVLTY23R.js";var j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Machines] Add machine";let r=t;return r})(),l=(()=>{let t=class t{constructor(){}};t.type="[Machines] Get machines";let r=t;return r})(),x=(()=>{let t=class t{constructor(e,i){this.machine=e,this.payload=i}};t.type="[Machines] Add OEE record";let r=t;return r})();var p={production:!1,apiUrl:"http://127.0.0.1:5000/api"};var E=(()=>{let t=class t{constructor(e){this.http=e}create(e,i){return this.http.post(p.apiUrl+e,i)}read(e,i){if(i){let u=new y;return Object.keys(i).forEach(f=>{u=u.append(f,i[f])}),this.http.get(p.apiUrl+e,{params:u})}return this.http.get(p.apiUrl+e)}update(e,i){return this.http.put(p.apiUrl+e,i)}delete(e){return this.http.delete(p.apiUrl+e)}};t.\u0275fac=function(i){return new(i||t)(s(M))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var I=(()=>{let t=class t{constructor(e){this.crud=e}addMachine(e){return this.crud.create("/machines",e)}getMachines(){return this.crud.read("/machines")}getMachinesSummary(){return this.crud.read("/machines/summary")}addOeeRecord(e,i){return console.log("machine",e,"data",i),this.crud.create(`/machine/${e.id}/oeeRecords`,i)}};t.\u0275fac=function(i){return new(i||t)(s(E))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var a,h=(a=class{constructor(t){this.machineService=t}static machines(t){return t.machines}addMachine(t,c){return this.machineService.addMachine(c.payload).pipe(d({next:e=>{t.dispatch(new l)},error:e=>console.error("Error adding machine",e)}))}getMachines(t,c){return this.machineService.getMachinesSummary().pipe(d({next:e=>{t.patchState({machines:e})},error:e=>console.error("Error getting machines",e)}))}addOeeRecord(t,c){return this.machineService.addOeeRecord(c.machine,c.payload).pipe(d({next:e=>{t.dispatch(new l)},error:e=>console.error("Error adding OEE record",e)}))}},a.\u0275fac=function(c){return new(c||a)(s(I))},a.\u0275prov=n({token:a,factory:a.\u0275fac}),a);o([m(j)],h.prototype,"addMachine",null);o([m(l)],h.prototype,"getMachines",null);o([m(x)],h.prototype,"addOeeRecord",null);o([v()],h,"machines",null);h=o([g({name:"machines",defaults:{machines:[]}})],h);export{E as a,j as b,l as c,x as d,h as e};
